<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Survey</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>  
</head>
<body class="container">
        <div class="jumbotron">
            <div class="h1">Survey Questions</div>
            <hr>
            <div class="h2">Only a couple of questions away!</div>
        </div>
        <div class="card">
                <div class="card-header font-weight-bold">
                    Personal Information
                </div>
                <div class="card-body">
                    <form>
                        <div class="form-group">
                            <label for="nameInput">Name</label>
                            <input type="text" class="form-control" id="nameInput" aria-describedby="nameHelp" placeholder="John Doe">
                        </div>
                        <div class="form-group">
                                <label for="ageInput">Age</label>
                                <input type="number" class="form-control" id="ageInput">
                        </div>
                        <div class="form-group">
                                <label for="photoInput">Photo Link</label>
                                <input type="url" class="form-control" id="photoInput">
                        </div>
                        <div class="form-group">
                                <label for="factInput">Random Fact!</label>
                                <input type="text" class="form-control" id="factInput">
                        </div>
                        <hr>
                        <div class="card-title font-italic">
                                Survey Questions
                        </div>
                        <div class="form-group">
                                <label for="question-1">Question 1</label>
                                <select class="form-control" id="question-1">
                                    <option>1 - Strongly Disagree</option>
                                    <option>2 - Alightly Disagree</option>
                                    <option selected="selected">3 - Neutral</option>
                                    <option>4 - Slightly Agree</option>
                                    <option>5 - Strongly Agree</option>
                                </select>
                        </div>
                        <div class="form-group">
                                <label for="question-2">Question 2</label>
                                <select class="form-control" id="question-2">
                                    <option>1 - Strongly Disagree</option>
                                    <option>2 - Alightly Disagree</option>
                                    <option selected="selected">3 - Neutral</option>
                                    <option>4 - Slightly Agree</option>
                                    <option>5 - Strongly Agree</option>
                                </select>
                        </div>
                        <div class="form-group">
                                <label for="question-3">Question 3</label>
                                <select class="form-control" id="question-3">
                                    <option>1 - Strongly Disagree</option>
                                    <option>2 - Alightly Disagree</option>
                                    <option selected="selected">3 - Neutral</option>
                                    <option>4 - Slightly Agree</option>
                                    <option>5 - Strongly Agree</option>
                                </select>
                        </div>
                        <button type="submit" class="btn btn-primary btn-lg btn-block send">Submit</button>
                    </form>
                    <hr>
                </div>
              </div>

        <footer class="footer">
            <div class="container">
                <p>
                    <a href="/api/friends">API Friend List</a>
                    | 
                    <a href="https://github.com/JoaquinValle/Friend-Finder">Github Repo</a>
                </p>
            </div>
        </footer>
    </body>
</html>

<script>
    $(".send").on("click", (event) => {
        event.preventDefault()
        let newPerson = 
          {            
            name: $("#nameInput").val().trim(),
            photo: $("#photoInput").val().trim(),
            scores: [
                parseInt($("#question-1").val().substring(0,1)),
                parseInt($("#question-2").val().substring(0,1)),
                parseInt($("#question-3").val().substring(0,1)),
            ],
            age: $("#ageInput").val().trim(),
            fact: $("#factInput").val().trim()
          }
          console.log(newPerson)
        $.post("/api/friends", newPerson)
    })
</script>